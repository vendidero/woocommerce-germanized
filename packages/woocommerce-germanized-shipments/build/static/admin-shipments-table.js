!function(){var e;window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},e=jQuery,window.germanized.admin.shipments_table={params:{},init:function(){var n=germanized.admin.shipments_table;n.params=wc_gzd_admin_shipments_table_params,n.initEnhanced(),e(document).on("click","#doaction, #doaction2",n.onBulkSubmit),e(".has-shipment-modal").wc_gzd_admin_shipment_modal(),e(document.body).on("init_tooltips",(function(){n.initTipTip()})),n.initTipTip()},onBulkSubmit:function(){var n=germanized.admin.shipments_table,t=e(this).parents(".bulkactions").find("select[name^=action]").val(),a=e(this).parents("#posts-filter").find("input.shipment_type").val(),i=[];if(e("#posts-filter").find('input[name="shipment[]"]:checked').each((function(){i.push(e(this).val())})),n.params.bulk_actions.hasOwnProperty(t)&&i.length>0){var s=n.params.bulk_actions[t];return e(".bulk-action-wrapper").find(".bulk-title").text(s.title),e("#posts-filter").addClass("bulk-action-processing"),e("#posts-filter").find(".bulkactions button").prop("disabled",!0),n.handleBulkAction(t,1,i,a),!1}},handleBulkAction:function(n,t,a,i){var s=germanized.admin.shipments_table,o=s.params.bulk_actions[n];e.ajax({type:"POST",url:s.params.ajax_url,data:{action:"woocommerce_gzd_shipments_bulk_action_handle",bulk_action:n,step:t,type:i,ids:a,security:o.nonce},dataType:"json",success:function(t){t.success&&("done"===t.data.step?(e(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(t.data.percentage),window.location=t.data.url,setTimeout((function(){e("#posts-filter").removeClass("bulk-action-processing"),e("#posts-filter").find(".bulkactions button").prop("disabled",!1)}),2e3)):(e(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(t.data.percentage),s.handleBulkAction(n,parseInt(t.data.step,10),t.data.ids,t.data.type)))}}).fail((function(e){window.console.log(e)}))},initTipTip:function(){e(".column-actions .wc-gzd-shipment-action-button").tipTip({fadeIn:50,fadeOut:50,delay:200})},initEnhanced:function(){try{e(document.body).on("wc-enhanced-select-init",(function(){e(":input.wc-gzd-order-search").filter(":not(.enhanced)").each((function(){var n={allowClear:!!e(this).data("allow_clear"),placeholder:e(this).data("placeholder"),minimumInputLength:e(this).data("minimum_input_length")?e(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:wc_gzd_admin_shipments_table_params.ajax_url,dataType:"json",delay:1e3,data:function(n){return{term:n.term,action:"woocommerce_gzd_json_search_orders",security:wc_gzd_admin_shipments_table_params.search_orders_nonce,exclude:e(this).data("exclude")}},processResults:function(n){var t=[];return n&&e.each(n,(function(e,n){t.push({id:e,text:n})})),{results:t}},cache:!0}};e(this).selectWoo(n).addClass("enhanced")})),e(":input.wc-gzd-shipping-provider-search").filter(":not(.enhanced)").each((function(){var n={allowClear:!!e(this).data("allow_clear"),placeholder:e(this).data("placeholder"),minimumInputLength:e(this).data("minimum_input_length")?e(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:wc_gzd_admin_shipments_table_params.ajax_url,dataType:"json",delay:1e3,data:function(n){return{term:n.term,action:"woocommerce_gzd_json_search_shipping_provider",security:wc_gzd_admin_shipments_table_params.search_shipping_provider_nonce,exclude:e(this).data("exclude")}},processResults:function(n){var t=[];return n&&e.each(n,(function(e,n){t.push({id:e,text:n})})),{results:t}},cache:!0}};e(this).selectWoo(n).addClass("enhanced")}))})),e("html").on("click",(function(n){this===n.target&&(e(":input.wc-gzd-order-search").filter(".select2-hidden-accessible").selectWoo("close"),e(":input.wc-gzd-shipping-provider-search").filter(".select2-hidden-accessible").selectWoo("close"))}))}catch(e){window.console.log(e)}}},e(document).ready((function(){germanized.admin.shipments_table.init()})),((window.wcGzdShipments=window.wcGzdShipments||{}).static=window.wcGzdShipments.static||{})["admin-shipments-table"]={}}();