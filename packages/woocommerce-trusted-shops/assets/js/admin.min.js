window.trusted_shops=window.trusted_shops||{},function(d,c){c.admin={params:{},optionPrefix:"",init:function(){this.params=trusted_shops_params,this.optionPrefix=this.params.option_prefix;var e=this;d(document).on("click","a.woocommerce-ts-input-toggle-trigger",this.onInputToogleClick),d(document).on("change","#woocommerce_"+this.optionPrefix+"trusted_shops_integration_mode",this.onChangeIntegrationMode),d(document).on("change",":input[id$=_enable]",this.onChangeEnable),d(document).on("change","#woocommerce_"+this.optionPrefix+"trusted_shops_reviews_enable",this.onChangeEnableReviews),d(document).find("#woocommerce_"+this.optionPrefix+"trusted_shops_integration_mode").trigger("change"),d(document).find(":input[id$=_enable]").trigger("change"),d(document).on("click","#wc-gzd-trusted-shops-export",this.onClickExport),d(document).on("click","table.form-table tr",this.onSidebarChange),d(":data(sidebar)").each(function(){d(this).parents("tr").on("click",e.onSidebarChange)}),d(document).on("click",'h2, div[id$="options-description"]',this.onSidebarTitelChange),d(document).on("submit","#mainform",this.onSaveForm)},onInputToogleClick:function(){var e=d(this).find("span.woocommerce-ts-input-toggle"),t=e.parents("tr").find("input[type=checkbox]"),o=e.hasClass("woocommerce-input-toggle--enabled");return e.removeClass("woocommerce-input-toggle--enabled"),e.removeClass("woocommerce-input-toggle--disabled"),o?(t.prop("checked",!1),e.addClass("woocommerce-input-toggle--disabled")):(t.prop("checked",!0),e.addClass("woocommerce-input-toggle--enabled")),t.trigger("change"),!1},onChangeEnableReviews:function(){var e=c.admin;d(this).is(":checked")?(d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_sticker_enable").parents("tr").show(),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_widget_enable").parents("tr").show(),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_brand_attribute").parents("tr").show()):(d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_sticker_enable").prop("checked",!1),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_widget_enable").prop("checked",!1),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_sticker_enable").parents("tr").hide(),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_widget_enable").parents("tr").hide(),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_brand_attribute").parents("tr").hide()),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_sticker_enable").trigger("change"),d(document).find("#woocommerce_"+e.optionPrefix+"trusted_shops_product_widget_enable").trigger("change")},onChangeIntegrationMode:function(){c.admin;d(document).find(":input[id$=_enable]").trigger("change")},onChangeEnable:function(){self=c.admin,self.showHideGroupElements(d(this))},showHideGroupElements:function(e){var t=e.attr("id"),o=c.admin,i=t.replace("woocommerce_"+o.optionPrefix+"trusted_shops_",""),r=i.substr(0,i.length-7),n=d(":input[id^=woocommerce_"+o.optionPrefix+"trusted_shops_"+r+"_], th[id^=woocommerce_"+o.optionPrefix+"trusted_shops_"+r+"_]"),s=!1,a=["woocommerce_"+o.optionPrefix+"trusted_shops_rich_snippets_category","woocommerce_"+o.optionPrefix+"trusted_shops_rich_snippets_product","woocommerce_"+o.optionPrefix+"trusted_shops_rich_snippets_home","woocommerce_"+o.optionPrefix+"trusted_shops_product_sticker_tab_text"];e.is(":checked")&&(s=!0),n.each(function(){var e=d(this).attr("id"),t=s;"woocommerce_"+o.optionPrefix+"trusted_shops_"+r+"_enable"!==e&&("woocommerce_"+o.optionPrefix+"trusted_shops_"+r+"_code"===e||"woocommerce_"+o.optionPrefix+"trusted_shops_"+r+"_selector"===e?!o.isExpertMode()&&t&&(t=!1):o.isExpertMode()&&0<d(this).parents("table.form-table").find(":input[id$=_code]").length&&-1==d.inArray(e,a)&&(t=!1),t?d(this).parents("tr").show():d(this).parents("tr").hide())})},onSidebarTitelChange:function(){d(this).nextAll("table.form-table:first").find("tr:first").trigger("click")},onSidebarChange:function(){var e=d(this).find("[data-sidebar]"),t=d(this).parents(".form-table"),o=d(".wc-ts-sidebar-active"),i=o;e.length<=0&&0<t.find("[data-sidebar]").length&&(e=t.find("[data-sidebar]:first")),i=e.length<=0?d("#wc-ts-sidebar-default"):d("#"+e.data("sidebar")),o.removeClass("wc-ts-sidebar-active"),i.addClass("wc-ts-sidebar-active")},getSettingsWrapper:function(){var e=c.admin.optionPrefix.replace("_","-");return d(".wc-"+e+"admin-settings")},addNotice:function(e,t){var o=c.admin;o.getSettingsWrapper().find("#message").remove(),o.getSettingsWrapper().prepend('<div id="message" class="notice '+e+' inline"><p>'+t.join("<br/>")+"</p></div>"),d("html, body").animate({scrollTop:o.getSettingsWrapper().offset().top-100},1e3)},validate:function(e){var t=c.admin,o=!0,i=e.attr("id"),r="_code"===i.substr(i.length-5),n=e.val();return e.data("validate")?"integer"===e.data("validate")&&(n=parseInt(n),isNaN(n)&&(o=!1)):t.isExpertMode()&&r&&""===n&&(o=!1),o},onSaveForm:function(){var r=c.admin,n=!0;return d("textarea, input, select").removeClass("wc-ts-has-error"),d("textarea:visible, input:visible, select:visible").each(function(){var e,t=d(this).attr("id"),o="_code"===t.substr(t.length-5),i=d(this).parents("tr").find("td");i.find(".wc-ts-error").remove(),r.validate(d(this))||(d(this).addClass("wc-ts-has-error"),e=o?r.params.i18n_error_mandatory:d(this).data("validate-msg"),i.append('<span class="wc-ts-error">'+e+"</span>"),n=!1)}),n||d("html, body").animate({scrollTop:r.getSettingsWrapper().find(".wc-ts-has-error:first").offset().top-100},1e3),n},isExpertMode:function(){c.admin;return"expert"===d("#woocommerce_"+this.optionPrefix+"trusted_shops_integration_mode").val()},onClickExport:function(){var e=c.admin,t=d(this).data("href-org");d(this).attr("href",t+"&interval="+d("#woocommerce_"+e.optionPrefix+"trusted_shops_review_collector").val()+"&days="+d("#woocommerce_"+e.params.option_prefix+"trusted_shops_review_collector_days_to_send").val())}},d(document).ready(function(){c.admin.init()})}(jQuery,(wp,window.trusted_shops));