=== Germanized for WooCommerce ===
Contributors: vendidero, vdwoocommercesupport
Tags: woocommerce, germany, germany, deutsch, woo
Requires at least: 5.4
Tested up to: 6.8
WC requires at least: 3.9
WC tested up to: 9.7
Stable tag: 3.19.1
Requires PHP: 5.6
License: GPLv3
License URI: http://www.gnu.org/licenses/gpl-3.0.html

Germanized extends WooCommerce to become a legally compliant shop for the german market. Must Have for every german WooCommerce shop owner.

== Description ==

Germanized extends WooCommerce to technically match specific german legal conditions. The objective of this plugin is to adapt WooCommerce to the special requirements of german market.
Users of [Germanized for WooCommerce Pro](https://vendidero.de/woocommerce-germanized "WooCommerce optimized for German Market") benefit from additional features, specifically designed for Germany, such as PDF invoices, model text generators for terms and revocation pages, premium support and more!

= Legal certainty for WooCommerce =
Germanized extends WooCommerce with typical german shop functionality: Delivery times, base prices, shipping costs and tax notices, options to attach legally relevant pages (e.g. terms, revocation page, privacy policy etc.) - even in emails, small business regulation notices and many more.
Furthermore we customized the WooCommerce checkout to make your store meet the button solution. See a list of our features for further details:

* *Delivery Times* - Add and edit delivery times (optionally on a per-country base) for WooCommerce products. Set a default delivery time as fallback. Disable delivery times for certain product types.
* *Small Business Regulation* - Show special tax notices if you are a operating a WooCommerce shop as a small business.
* *Shipping Costs and Tax notices* - Display notices beneath your WooCommerce product prices and within cart/checkout/e-mails.
* *Base Prices* - Display additional per unit prices for your products. Let unit prices be calculated automatically (Pro).
* *Short Cart Product Descriptions* - Display a special product description within your WooCommerce cart/checkout.
* *Terms, Revocation, Privacy Policy* - Display checkboxes within your checkout to make sure customers agree to your conditions.
* *Legal Checkboxes UI* - Adjust your legal WooCommerce checkboxes (e.g. terms & conditions) through a fluent user interface.
* *Button Solution* - We adjust your checkout and submit button to comply with german button solution.
* *Sell Food (Pro)* - Label your food (nutrients, ingredients, allergenic), sell deposit bottles, show the Nutri-Score.
* *OSS compliance* - Germanized helps your WooCommerce shop to be compliant with the new One Stop Shop procedure
* *Double opt-in (DOI) for Customers* - Make sure customers opted in while registering within your shop. Optionally disable checkout until the customer opted in.
* *Tax Calculation for Shipping Costs and Fees* - Enable split tax calculation based on your WooCommerce cart taxes.
* *Legal pages in Email Templates* - Attach legal pages content to certain WooCommerce e-mail templates.
* *Trusted Shops Integration* - Integrate your Trusted Shops Products within your WooCommerce store
* *Post, DHL, DPD (Pro) and GLS (Pro) Integration* - Generate labels for shipments and returns right from your backend. Offer preferred delivery services to your customers.
* *Payment Gateway: SEPA direct debit* - Receive payments via direct debit. We've added a XML export to transfer payments to your bank.
* *Payment Gateway: Pay by Invoice* - Allow certain customers to pay by invoice. Best integration with our PDF invoices feature (Pro).
* *Online Revocation Form* - Allow customers to submit revocations by filling out a form on your revocation page.
* *Sale Price Labels* - Prepend your WooCommerce sale prices by certain tags e.g. old price and new price.
* *Photovoltaic Systems* - Sell photovoltaic systems by applying the zero tax rate for customers who meet the legal requirements
* *Differential Taxation* - Insert special notices for products which a differential taxed.
* *Used Goods and Defective Copies* - Show defect descriptions on your product page and during checkout.
* *WPML Support* - Germanized can be used with WPML.
* *REST API Support* - Data added by Germanized is adjustable via the WooCommerce REST API (v2)
* *Product CSV Import/Export* - We've extended the WooCommerce product CSV import and export to support our custom fields (e.g. unit price, delivery time etc.)
* *GDPR export/delete* - We do support the export/delete features of WordPress 4.6 and WooCommerce 3.4 and added new checkboxes to checkout and register form.
* *PDF Invoices & Packing Slips (Pro)* - Easily create PDF invoices, packing slips and cancellations via your WooCommerce order screen. Optionally generate PDFs automatically based on a certain order status.
* *Legal PDF attachments (Pro)* - Attach PDFs to certain email templates instead of plain text. Optionally let Germanized generate your PDFs automatically by parsing your page content.
* *Delayed conclusion of contract (Pro)* - By default a contract is concluded right after submitting the WooCommerce checkout. Germanized offers you to delay that contract and manually check the order before concluding the contract.
* *VAT ID check for WooCommerce (Pro)* - Provide additional fields within checkout, customer account and registration form to automatically validate the VAT ID based on the EU API.
* *Multistep Checkout (Pro)* - Adjusts the default single-page-checkout within WooCommerce to support a multistep checkout without overriding templates for optimal theme support.
* *GPSR compliance* - Add manufacturer information and safety documents to your products

= Germanized for WooCommerce is certified by Trusted Shops =
Germanized has been approved by Trusted Shops and therefor offers best technical conditions to operate a legally binding WooCommerce Shop in Germany.
Trusted Shops certifies Shops after selected and weighted criteria and has carefully examined our WooCommerce Plugin.
Of course Trusted Shops customers may embed their quality seals or further Trusted Shops Products as genuine Seller and Product Reviews by adapting just a few options within Germanized for WooCommerce.

= Pro: WooCommerce PDF invoices & packing slips =
As a Pro User of Germanized you may automatically or manually create PDF Invoices and Packing Slips for your orders. Adjust your document layout by using the built-in visual document editor.
Either export your documents (CSV, zip) for your tax consultant manually or use our integrations to transmit your documents to your lexoffice or sevdesk account.
Learn more about [PDF Invoices for WooCommerce](https://vendidero.de/woocommerce-germanized/features#accounting "WooCommerce PDF Invoices")

Furthermore you may attach legally relevant pages (e.g. Terms & Conditions) as PDF documents to specific WooCommerce emails instead of using plain text.

= Add shipments to WooCommerce orders =
Germanized adds a new abstraction layer to WooCommerce to make it easier for you to send your parcels to your customers. With Germanized you'll be able to generate (multiple) shipments to an order.
You can then manage your shipments and it's statuses independently from your orders. Let your customers receive a notification email as soon as a shipment has been marked as shipped including tracking information from a built-in or manually added shipping provider. Learn more about our [Shipments for WooCommerce](https://vendidero.de/woocommerce-germanized/features#shipments "Shipments for WooCommerce") integration and find out how to automate your shipping process.

= Handle returns with ease =
Managing returns can be a time-consuming challenge. By using Germanized you might let your customers create return requests through their customer panel. All you need to do is confirm the request through your return dashboard and your customers will receive an email containing further steps on how to return their product(s).
In case you are using our DHL integration you might as well (automatically) create a label to the return which will be attached to the email sent to the customer.

= Post, DHL, DPD (Pro) and GLS (Pro) Integration =
With the help of our built-in Post, DHL, DPD (Pro) and GLS (Pro) integration you can easily create labels for your shipments and add tracking information to the notification emails. Furthermore you can offer DHL preferred delivery services to your customers including shipping to Packstation or choosing a drop-off location and/or day within the checkout.
You can even let your shipments and labels be generated automatically by Germanized to avoid further manual work. [Learn more](https://vendidero.de/doc/woocommerce-germanized/versanddienstleister-verwalten "Shipping Provider for WooCommerce") about how our shipping provider integrations work.

= Extended One Stop Shop compliance =
With a little help from our [One Stop Shop compliance plugin for WooCommerce](https://wordpress.org/plugins/one-stop-shop-woocommerce/) bundled within Germanized you'll handle the new EU VAT regulations with ease. Generate new VAT reports for different time frames and let the plugin
observe the delivery threshold automatically to make sure you'll get notified in case you are close to reaching the threshold and need to take action.

= Pro: Premium Support =
Customers of Germanized for WooCommerce Pro enjoy our high-quality support via tickets. Nevertheless we also seek to offer a good plugin support via our WordPress support forum.

= Tested WooCommerce Plugins =
We've added some specific compatibility and tests for certain popular WooCommerce plugins. See this list for further details:

* WPML
* WooCommerce Dynamic Pricing
* WooCommerce Role Based Pricing
* WooCommerce Product Bundles
* WooCommerce Subscriptions
* WooCommerce Measurement Price Calculator
* Elementor

= Tested WooCommerce Themes =
By default, Germanized works with *every WooCommerce theme*. Some themes may need adjustments due to not using WooCommerce standards hooks or styles. Within our professional version we've tested certain third-party WooCommerce themes to ensure better compatibility with Germanized for WooCommerce:

* Flatsome
* Enfold
* Storefront
* Virtue
* Shopkeeper
* Astra
* OceanWP

== Installation ==

= Minimal Requirements =

* WordPress 5.4 or newer
* WooCommerce 3.9 (newest version recommended)
* PHP Version 5.6 or newer

= Automatic Installation =

We recommend installing Germanized for WooCommerce through the WordPress Backend. Please install WooCommerce before installing our plugin.
After the installation you may easily adapt the settings to your own needs.

= Product specific shortcodes =
You may use one of the following product-specific shortcodes to output notices within PageBuilders or on custom-built-pages.
The `product` parameter is optional. Shortcodes are falling back to the global $product variable in case the `product` parameter is missing.

`[gzd_product_unit_price product="123"]`
Outputs unit price for a product.

`[gzd_product_units product="123"]`
Outputs units included with the product e.g. 100 ml.

`[gzd_product_delivery_time product="123"]`
Outputs delivery time for a product.

`[gzd_product_tax_notice product="123"]`
Outputs tax notice for a product.

`[gzd_product_shipping_notice product="123"]`
Outputs shipping costs notice for a product.

`[gzd_product_defect_description product="123"]`
Outputs defect description for a defective copy.

`[gzd_product_cart_desc product="123"]`
Outputs mini cart description for a product.

= General Shortcodes =

`[revocation_form]`
Inserts online revocation form within your WooCommerce store. Customer and shop manager receive a confirmation by email.

`[payment_methods_info]`
Very useful as page to inform the user of your WooCommerce payment gateways - Inserts an overview of all enabled payment gateways plus their descriptions.

`[gzd_email_legal_page_attachments email_id="customer_processing_order"]`
This shortcode outputs the legal page content attached to a specific email template. In case the email_id attribute is missing the shortcode tries to determine the current email template being sent.
The shortcode is useful to output the legal page attachments in custom email templates built via a GUI (e.g. email customizer plugins).

`[gzd_complaints]`
Inserts a text that informs the customer about the EU Online Dispute Platform - this Shortcode should be inserted within your imprint. Find more information [here](http://shop.trustedshops.com/de/rechtstipps/jetzt-handeln-link-auf-eu-online-schlichtungs-plattform-ab-9.1.2016).

`[gzd_return_request_form]`
Insert the guest return request form which allows guests to submit [return requests](https://vendidero.de/doc/woocommerce-germanized/retouren-konfigurieren-und-verwalten).

= Updating Germanized for WooCommerce =

Before updating WooCommerce you should definitely check whether Germanized does already support the newest version.
You may of course Update Germanized for WooCommerce automatically through the WordPess Backend. Please make sure to always backup (at least your database) before updating any theme or plugin.

== Frequently Asked Questions ==

= Where can I find the documentation? =
[Germanized Documentation](https://vendidero.de/doc/woocommerce-germanized/home-germanized)

= Need help? =

You may ask your questions regarding Germanized for WooCommerce within our free [WordPress Support Forum](https://wordpress.org/support/plugin/woocommerce-germanized).
Professional help desk support is being offered to [Professional Users](https://vendidero.de/woocommerce-germanized "Support for WooCommerce Germanized") only.

= Not every option fits my WooCommerce Theme =

Unfortunately not every Theme does implement WooCommerce in the way it's meant to be or differs from the original structure which leads to layout and/or compatibility
issues. For testing purposes, please activate a default WordPress Theme (such as TwentyX) and see whether the issues persist.

= Using a Pagebuilder? =

In case you are using a Pagebuilder (e.g. Elementor, Divi-Builder) you might want to replace the default [shopmarks](https://vendidero.de/doc/woocommerce-germanized/preisauszeichnungen-anpassen) placed by Germanized with our custom [shortcodes](https://vendidero.de/doc/woocommerce-germanized/preisauszeichnungen-anpassen#pagebuilder).

= Email attachments not showing in WooCommerce order confirmation email =

In most times you have a wrong configuration within your Germanized email settings. The order confirmation email sent to the customer after an order has been made is called "Processing Order". The email called "New Order" is the email
sent to the Administrator which serves as a notification only - so make sure you have "Processing Order" selected within the plugins' settings.

= Want to file a bug or improve Germanized for WooCommerce? =

Bug reports may be filed via our [GitHub repository](https://github.com/vendidero/woocommerce-germanized).

== Screenshots ==

1. Some of the checkout adjustments to comply with the button solution
2. General settings screen
3. Germanized for WooCommerce Legal Checkboxes UI
4. WooCommerce Multistep Checkout (Pro)
5. Manage shipments and invoices (Pro) for orders
6. Edit pdf documents (Pro)

== Changelog ==
= 3.19.1 =
* Fix: Warning while declaring Shiptastic feature compatibility in Woo Core
* Fix: Shiptastic migration script force reset options to prevent unnecessary warnings
* Fix: Possible infinite loop when using WPML with Shiptastic
* Fix: WooCommerce PayPal Payments legacy Shipments namespace compatibility

= 3.19.0 =
* New: Refactored Shipments to Shiptastic. Read more at https://vendidero.de/doc/woocommerce-germanized/shipments-zu-shiptastic-migration
* Improvement: Use inner spans to apply delivery time html classes
* Improvement: Add shipping tax rates even for shipping costs with zero taxes, e.g. free shipping
* Improvement: Watch for attribute changes while observing prices too
* Improvement: Shipping method: Added tax status option to make sure Woo can retrieve the right tax status
* Improvement: Assembled bundle handling when creating shipments
* Fix: Hide block-fill-wrapper in block checkout

= 3.18.7 =
* New: Support labelling (power supply) for wireless electronic devices
* Improvement: Latest WC Checkout block UI compatibility
* Improvement: By default do not treat downloadable but non-virtual items as exempts for shipping costs/delivery time
* Improvement: WPML support for conditional checkboxes
* Fix: Do not enforce (re-) escaping html provided via filter to price labels
* Fix: Assume packaging weight unit as default unit when displaying reports

= 3.18.6 =
* New: DHL Kleinpaket
* New: DHL REST prefer auth via OAuth
* Improvement: WPML copy manufacturer product meta
* Improvement: Hide price label desc in mini cart
* Improvement: Prefer using the newly introduced GTIN option from Woo Core if available

= 3.18.5 =
* New: Free-text field to output additional product safety information
* Improvement: Redirect fix after finishing bulk action
* Improvement: Do not render disabled checkboxes
* Improvement: Elementor Pro checkout compatibility with latest Elementor version
* Improvement: Add gtin/mpn to structured product data, if available
* Improvement: Google for WooCommerce compatibility
* Fix: Show/hide label services based on selected product
* Fix: Shopmark enabled/disabled status in checkout/cart blocks

= 3.18.4 =
* New: WP 6.7 compatibility
* Improvement: Manufacturer bulk + quick edit support
* Improvement: Auto correct certain address_1 user input errors, e.g. Bootstr.12 -> Bootstraße 12
* Improvement: Do not allow pickup location delivery for DHL Warenpost
* Improvement: Exclude certain gateways from allowing pickup location delivery
* Improvement: Bundles shipment compatibility
* Improvement: Added WooCommerce Shipment Tracking fallback compatibility
* Improvement: Use attachment caption, if available as safety document title
* Fix: Newest Woo Checkout block HTML structure compatibility
* Fix: DHL Preferred day lead time calculation
* Fix: Tax calculation exempt while applying order voucher coupon

= 3.18.3 =
* Improvement: Allow 0 as valid house number
* Improvement: Harden invoice gateway customer check to prevent possible error in admin context
* Improvement: Do not automatically show (a possibly hidden) unit price (e.g. empty) after observer update
* Fix: Label creation from within the shipments table page
* Fix: Internetmarke preview in label modal
* Fix: Manufacturer import

= 3.18.2 =
* Fix: Transform packaging dimensions/weight while syncing shipment

= 3.18.1 =
* Fix: Product map caching issue

= 3.18.0 =
* New: Compliance with new GPSR regulation
* Improvement: Refactored shipments integration settings UI
* Improvement: Store weight/dimension unit in packaging data
* Improvement: Send order paid mail on pending to completed notification (e.g. virtual items)
* Fix: Unit price observer sale price
* Fix: DHL sandbox environment
* Fix: DHL Warenpost mm bug
* Fix: Prevent missing items in shipment weight/dimension calculation

= 3.17.4 =
* Fix: REST API Schema insertion leading to fatal error during cron actions
* Fix: Patch DHL location finder results when addressLocality is missing

= 3.17.3 =
* Improvement: Pickup location search in block-based checkout
* Improvement: Allow guests to view shipments in order tracking shortcode
* Fix: DHL SOAP signedForByRecipient wsdl patch
* Fix: Pickup location transient cache issue
* Fix: Block house number address validation

= 3.17.2 =
* Improvement: Add link to last shipment's tracking url in order shipping status column
* Improvement: Added new abstraction layer for pickup location provider settings
* Improvement: Support for specific item based free shipping rules, e.g. based on exact shipping class match or restricted packaging
* Fix: Variation shipping dimensions
* Fix: Prevent certain special chars in DHL label references to prevent cryptic inlay label error messages

= 3.17.1 =
* Improvement: Support unit product ranges for variable products, e.g. 100 ml - 200 ml
* Improvement: Use all available (even non-fitting) packaging options in view-mode only
* Improvement: Prevent (loading, creating) orphan shipment items
* Improvement: Skip custom shipping address option creation during installation
* Improvement: Added option to decide whether to use a custom return address or not
* Fix: FSE theme hook injection fatal error
* Fix: Revert to using transients (like Woo Core does) instead of options for setup/activation redirection
* Fix: Support importing checkout visibility attribute for variable products
* Fix: Re-add missing country-specific delivery time label
* Fix: Cleanup email gettext filter within email footer
* Fix: Check for product existence before applying bundle shipments compatibility

= 3.17.0 =
* New: WP 6.6 compatibility
* Improvement: Woo 9.0 compatibility
* Improvement: Pickup location modal styles, hidden classes
* Improvement: Shipments bundle compatibility, parent-child hierarchy
* Improvement: Preview shipment button in shipment table
* Improvement: Allow managing label references via options
* Improvement: Allow choosing a custom value of goods for DHL insurance
* Improvement: Added custom delivery time classnames to delivery time wrapper
* Fix: Check attribute type while exporting product data

= 3.16.9 =
* Fix: Incompatibility with Amazon Pay

= 3.16.8 =
* Improvement: Support gateway fee (Nachnahme) in block-based checkout
* Improvement: DHL SOAP WSDL files update, added optional MRN to SOAP API too
* Fix: Divi checkout builder compatibility

= 3.16.7 =
* Improvement: Pickup location style fallbacks for custom checkouts
* Fix: Checkout checkboxes block undefined state check
* Fix: Elementor Pro compatibility with third party addons
* Fix: Product attribute checkout visibility export

= 3.16.6 =
* Improvement: Pickup location UI in classic checkout and account page
* Improvement: Support export reference number (mrn) for international shipments
* Improvement: Allow choosing DHL API type from new option
* Improvement: Added tax rate percentage formatting filter
* Improvement: Support checkout visibility product attribute import/export
* Improvement: Support Austria specific legal title in complaints template
* Improvement: Support conditional checkbox display, e.g. revocation notice within emails too
* Fix: Parcel outlet service default booking
* Fix: Photovoltaic systems custom tax class filters
* Fix: Language variant fallback support (e.g. CH, AT) for WP >= 6.5
* Fix: Duplicate nonce removal in classic checkout edge case
* Fix: Voucher checkout/cart display + calculation

= 3.16.5 =
* Fix: Prevent type error when converting cart dimensions
* Fix: Non-existent pickup locations field hiding logic
* Improvement: Remove legacy email resend filter
* Improvement: Divi checkout builder compatibility

= 3.16.4 =
* Fix: Checkout block prevent multiple refresh leading to react errors
* Improvement: Pickup location admin fields Woo < 8.6 backwards compatibility
* Improvement: Street number validation within checkout block in case activated
* Improvement: Increase DHL pickup location search radius

= 3.16.3 =
* Fix: Prevent duplicate meta entries within shipping provider meta table
* Fix: Remove duplicate meta entries in update script

= 3.16.2 =
* Fix: Compatibility issue with PayPal Payments and checkout field registration
* Fix: DHL shipment zone detection
* Fix: Prevent key warnings when loading shipping method data

= 3.16.1 =
* Fix: Prevent fatal error for base countries not supporting built-in shipping providers

= 3.16.0 =
* New: Support pickup location selection in block-based Checkout
* New: Use select field to choose pickup location and move selection out of shipping address fields
* Improvement: Generalized pickup location implementation to allow integrations for other shipping providers
* Improvement: Order submit button fallback compatibility
* Improvement: Added shipping method debug mode output
* Improvement: Sort DP print format list
* Fix: Do not allow shipping method to be selected in case at least one product does not fit the available packaging
* Fix: Prevent Helgoland from being tread as third-country for DHL

= 3.15.8 =
* Fix: Shipping provider object cache compatibility

= 3.15.7 =
* New: WP 6.5 support
* New: Support deviating shipping dimensions for products
* Improvement: Introduce cache helpers for shipments and shipment-related objects
* Improvement: Theme compatibility for woocommerce_review_order_after_submit and woocommerce_review_order_before_submit
* Improvement: Support dynamically recalculating unit price ranges for variable products
* Fix: Shipping rules shipping class condition
* Fix: Shipping rules global packaging filter
* Fix: Shipment weight check while finding available shipping provider services

= 3.15.6 =
* Improvement: Do not override classic checkout table via template, inject images via filters instead
* Improvement: Exclude virtual (but not non-virtual download) products from split-tax calculation
* Improvement: Force showing editable checkboxes for manually created orders
* Improvement: Hide block-based price labels within classic cart/checkout
* Improvement: Do only apply buffer in case auto packing shipments is enabled
* Improvement: Added (optional) packaging inner dimensions
* Improvement: While packing within cart apply global rules first to exclude certain packaging options
* Improvement: Added cart-wide shipping class rule type to shipping methods
* Improvement: Allow users to manually select non-fitting packaging options
* Improvement: Address split edge-case treatment
* Fix: Split-tax calculation for block-based Checkouts
* Fix: PayPal Payments compatibility
* Fix: DP default tracking URL

= 3.15.5 =
* New: Photovoltaic system VAT exempts for Austria
* Improvement: Use placeholders within photovoltaic system legal (checkbox, notice) text to output law details based on country

= 3.15.4 =
* New: Support WooCommerce cart dropdown template block
* Improvement: Use 1 gram as minimum resolution for label customs data
* Improvement: Shipping method cart data compatibility with product bundles
* Improvement: Do not defer label creation in case shipment has already been marked as shipped
* Improvement: Maybe defer frontend script loading as Woo does starting with 8.4
* Improvement: Price label replacement within price html
* Improvement: Do only move checkboxes for elementor in case checkout is built with Elementor Pro
* Fix: DHL valid address only checkbox
* Fix: Shipments order item update validation
* Fix: Shipping method condition field name overrides

= 3.15.3 =
* Improvement: Deutsche Post available product selection based on shipment dimensions
* Improvement: Create non auto-packed shipment in case no packaging options are available
* Fix: Return label missing address data
* Fix: Setup wizard styles

= 3.15.2 =
* Improvement: Disable paid for order email notification for certain gateways
* Fix: Make sure return label is automatically created before sending customer notification
* Fix: Use default label configuration for label REST API requests in case no arguments are supplied
* Fix: CashOnDelivery DHL Service default booking
* Fix: Warenpost International Services for EU shipments
* Fix: Allow refreshing Deutsche Post product data in general settings

= 3.15.1 =
* Improvement: Remove WSDL library dependency
* Fix: Issue with the DHL inlay return service
* Fix: Prevent get_current_screen error with additional check before usage
* Fix: Use ReturnTypeWillChange to prevent PHP warnings in packing impl
* Fix: Default shipping provider for orders without shipping method

= 3.15.0 =
* New: Custom shipping methods and rule-based shipping for shipping providers
* New: Add label configuration sets to packaging options
* New: Support auto-packing orders based on available packaging options
* New: Added additional options, e.g. shipping class/provider restrictions to packaging
* New: Use Woo Action scheduler to automatically create shipments as a background task
* Improvement: Checkbox status reporting UI (order page sidebar)
* Fix: Dynamic, missing properties in gateways

= 3.14.1 =
* Improvement: Show return address only in case the return is in processing state
* Improvement: Hide shipping order item shipping provider meta
* Improvement: Clear action queue on deactivation
* Improvement: Use regex for checkout block markup replacements
* Fix: Order shipping status in case returns exist
* Fix: Use a tweak to prevent missing block checkout data error
* Fix: Type issue when resetting shipping rate taxes

= 3.14.0 =
* New: Support WooCommerce Cart & Checkout Block
* New: Support Full-Site-Editing, added price label blocks for Single Product Template
* New: WP 6.4 Support
* Improvement: Elementor Pro checkout layout
* Improvement: Unit price recalculation queue

= 3.13.5 =
* Fix: Local wsdl files naming conventions (Windows issue only)

= 3.13.4 =
* Improvement: Queue price changes and refresh unit prices via one AJAX request
* Improvement: Observe price changes within product categories too
* Improvement: Better FSE support
* Improvement: Register PayPal Payments carrier detection
* Improvement: Customs data item weight distribution
* Improvement: Removed deprecated DHL SOAP API shipping notification attribute
* Improvement: Added local wsdl files for Internetmarke
* Fix: Removed legacy WPML string translation compatibility script
* Fix: Bug in setup wizard which could lead to tax incl option reset
* Fix: Use WeakMap (>= PHP 8.0) to build product cache instead of dynamic class properties
* Fix: Variation defect description
* Fix: Shipping method cache hardening
* Fix: HPOS bug in conjunction with shipment order status automation

= 3.13.3 =
* New: Woo 7.9 support
* New: DHL Empfängerunterschrift
* Improvement: DHL REST API street number validation
* Improvement: DHL REST API shipper contact name
* Improvement: Order confirmation timing while using checkout block
* Improvement: Remove HTML comments from plain legal text attachments
* Improvement: Klarna Checkout ignored fields
* Fix: Check whether bundle methods exist before usage
* Fix: EU tax rate to class mapping for english setups

= 3.13.2 =
* Improvement: Variation content replacement
* Fix: WPML compatibility loading check
* Fix: Do only check for legal meta box on pages

= 3.13.1 =
* New: Woo 7.8.0 support
* New: Allow excluding certain products from returns
* Improvement: Review order heading show/hide logic
* Improvement: Respect tax display mode while recalculating unit prices
* Improvement: Product Bundles bundle total price labelling and revocation exempt detection
* Fix: Do not automatically create shipments for renewal orders unless configured
* Fix: DHL Paket (new) REST API authentication

= 3.13.0 =
* Improvement: Refactored shipment modals
* Improvement: DHL Paket REST API support
* Improvement: Shipment action GUI adjustments
* Improvement: Support separate DHL participation number for GoGreen
* Improvement: Customs description product field
* Improvement: Send paid for order notification for failed to pending
* Improvement: Allow filtering other textdomains for email title adjustments, e.g. Woo Subscriptions
* Improvement: Explicitly recalculate voucher amount while recalculating order totals
* Improvement: REST API schema
* Improvement: Product Addons compatibility
* Fix: Prevent object term relationship deletion when food option is disabled
* Fix: Do not trigger the change event for the (hidden) WooCommerce core terms

= 3.12.2 =
* Feature: Optionally tax additional costs based on the main service instead of splitting taxes
* Improvement: Support photovoltaic systems containing zero tax class as default option
* Improvement: Do not calculate taxes for other services (e.g. virtual/service) for northern ireland
* Improvement: Base country support for photovoltaic systems VAT exemptions
* Improvement: Transfer the state value as province field to DHL API for third-country deliveries
* Fix: Retrieving product category ids for variations

= 3.12.1 =
* Improvement: Add admin description to order confirmation email
* Improvement: dbDelta schema
* Improvement: Use null as default mysql datetime fields
* Fix: Error while removing checkboxes during forced pay for order redirect

= 3.12.0 =
* Feature: WP 6.2 support
* Feature: Sell photovoltaic systems by applying zero tax rate for certain customers
* Improvement: Exclude certain shipping methods from loading shipping provider settings
* Improvement: Removed legacy built-in packages, e.g. OSS, Trusted Shops which are standalone plugins by now
* Fix: Prevent Elementor from overriding legal page meta content in emails

= 3.11.4 =
* Feature: Support with HPOS WooCommerce feature
* Improvement: Non-food products should not be able to show a deposit
* Improvement: Observe version updates during init hook to prevent invalid update states
* Improvement: WPML email and order item meta translation
* Improvement: Format unit prices as localized price in CSV export
* Improvement: Include zero tax class during tax share calculation (e.g. for photovoltaics)
* Improvement: Remove style-tags from attached email legal texts
* Improvement: Updated Luxembourg tax rate
* Improvement: Validate DHL pickup address type in case of delivery to Packstation/Post Office
* Improvement: Use custom theme button class
* Improvement: Fallback support for legacy shipping methods that do not support instance settings
* Fix: DHL Preferred Delivery costs decimal parsing

= 3.11.3 =
* Feature: Create packaging reports on a per-country base
* Improvement: Allow sorting shipping providers
* Improvement: Send order confirmation for orders created via REST API
* Improvement: Privacy Policy page detection during new installations
* Improvement: eRecht 24 shortcode compatibility
* Improvement: Register review authenticity via WPML
* Improvement: Gift card compatibility with voucher redemption
* Improvement: Mark checkout fields with errors as invalid after AJAX requests
* Improvement: Cartflows checkout compatibility
* Fix: Global product instance reset during block adjustments

= 3.11.2 =
* Improvement: Switch plugin locale to de_DE when using de_CH or de_AT
* Improvement: Allow filtering shipment list by provider
* Fix: Prevent errors caused by WooCommerce PayPal Payments from processing shipments
* Fix: Postfiliale postNumber field in DHL API

= 3.11.1 =
* Fix: JS error during label creation
* Fix: Prevent DHL parcel location finder PHP warning if address_2 field is disabled

= 3.11.0 =
* Feature: WP 6.1 compatibility
* Feature: DHL closest droppoint (CDP) and PDDP support
* Feature: New DHL unified location finder API
* Improvement: Allow disabling instant order confirmation on a per-order base
* Improvement: PayPal Payments Pay upon Invoice compatibility
* Improvement: Allow providing a cart description for variable parent products as fallback
* Improvement: Divi checkout builder compatibility
* Improvement: Add to cart variation script compatibility
* Improvement: DHL error message for missing product participation numbers
* Improvement: Shipment address UK VAT ID for brexit exports
* Improvement: DHL pickup address validation
* Fix: DHL ident check service sync
* Fix: WPML delivery times compatibility
* Fix: Localized decimal formatting in settings

= 3.10.6 =
* Improvement: Prevent new account activation email from being sent during DOI process in latest Woo version
* Improvement: Prevent install redirection loops when transients fail
* Fix: Formal localized decimal in packaging admin list
* Fix: Formal language install check

= 3.10.5 =
* Improvement: Add HS code and manufacture country to REST API
* Improvement: Legacy function wrapper for wc_ts functions
* Improvement: Do not show review authenticity status for child comments
* Fix: Force min_ages enum to be string during REST API requests
* Fix: Setup wizard screen id

= 3.10.4 =
* Feature: Create packaging summary reports
* Feature: New Trusted Shops Easy Integration
* Improvement: Order shipping status
* Improvement: Allow missing Packstation indicator during DHL checkout
* Improvement: Nutrients WPML compatibility
* Fix: Prevent SOAP call during DHL connection check if missing

= 3.10.3 =
* Improvement: Multisite dependency check
* Improvement: Admin add order fee tax calc
* Fix: AJAX unit price refresh

= 3.10.2 =
* Improvement: Shipments REST API writable attributes
* Improvement: Elementor Pro 3.7.3 compatibility

= 3.10.1 =
* New: REST API endpoint for shipments
* Improvement: Install helper for additional packages (e.g. OSS)
* Improvement: Separately install OSS plugin in case needed (notice existing installs)
* Improvement: Setup wizard styling
* Improvement: Invalid base country detection notice
* Improvement: Elementor Pro review order heading
* Improvement: Moved MPN/GTIN functionality from TS package to core
* Improvement: Whitelist IT Recht Kanzlei Shortcodes for legal texts
* Improvement: Apply the same shipping/fee tax calculation within admin order screen
* Improvement: WPML compatibility with delivery times for variable products
* Improvement: New manage order column with shipping status
* Fix: REST API schema
* Fix: Tax share float check
* Fix: SEPA XML debtorAdrLine
* Fix: Taxable order address

= 3.9.8 =
* Improvement: Add extended support for pain.008.003.02 and mark as new SEPA XML default
* Improvement: Do not send password reset link with DOI activation email as it gets invalidated after activation
* Fix: Resend DOI activation link
* Fix: Deutsche Post WP International API is discontinued starting from 2022-07-01 - please use DHL API instead

= 3.9.7 =
* Fix: IM print/product settings saving
* Fix: Missing SEPA form fields due to wrong output escape

= 3.9.6 =
* Improvement: PHP code sniffer fixes
* Fix: IM label settings save
* Fix: Skip shipment return item in case quantity <= 0

= 3.9.5 =
* Security: Hardened URL escaping to prevent XSS attack vectors
* Improvement: Register meta boxes for legal page email content for legal pages only
* Improvement: Variable unit price data transmission while saving variations

= 3.9.4 =
* Tweak: Temporarily patch WooCommerce Multilingual bug which leads to update issues
* Improvement: Added additional checks to determine whether WooCommerce reviews are enabled
* Improvement: Legal news update note

= 3.9.3 =
* Feature: Omnibus-Policy compliance (notify customers about the authenticity of customer reviews)
* Improvement: Quick-View general compatibility
* Improvement: Do not use deprecated elementor _register_controls
* Improvement: Allergenic product import handling
* Improvement: Voucher discount calculation
* Improvement: Divi template builder checkout
* Fix: Template locating for checkboxes

= 3.9.2 =
* Fix: State select hide for DE
* Fix: Food nutrients variation parent merge
* Improvement: Food attribute formatting
* Improvement: Admin notes handling with nonce links

= 3.9.1 =
* Fix: Default shopmark filter for deposits in mini-cart dropdown
* Fix: Deprecated virtual VAT helper legacy load
* Improvement: Validate filter existence before executing shopmarks
* Improvement: DP Internetmarke products transient expiration

= 3.9.0 =
* Feature: WP 6.0 compatibility
* Feature: Sell food in a legally secure way (Pro)
* Improvement: Store vouchers as fees to allow mixing vouchers and discounts in cart
* Improvement: Hide the state field for Germany (which was introduced in Woo 6.3)
* Improvement: Use Woo-like data-attributes for variation script
* Improvement: New, separate shopmark templates for product loops
* Improvement: Send order confirmation for manually created orders
* Improvement: Import/Export handling during cron requests
* Fix: WPML delivery times (per country) translation
* Fix: Unit price cart calculation rounding

= 3.8.5 =
* Improvement: Updated DHL signup links
* Improvement: Updated to latest OSS version

= 3.8.4 =
* Improvement: Added formatted customer title to REST API
* Improvement: Variation price detection
* Improvement: Shipping costs refund tax precision
* Improvement: Divi checkout module compatibility
* Improvement: Divi product builder compatibility
* Improvement: Unit price price observer price detection
* Improvement: Return request parsing order ids
* Improvement: Connection status check for DHL API
* Fix: Allow booking DHL premium for EU and third countries

= 3.8.3 =
* Improvement: Prevent DHL preferred services from showing in non-shipping carts
* Improvement: Prevent parcel delivery checkbox from showing in non-shipping carts

= 3.8.2 =
* Improvement: Elementor Pro Checkout widget compatibility
* Improvement: Variation main price detection
* Improvement: Checkout shutdown handler to send fallback order confirmation
* Improvement: Updated DHL wsdl files to 3.2
* Improvement: Insert DHL preferred services checkout selection after checkboxes
* Fix: Mark variations as not needing update after triggering checkbox change event
* Fix: Direct Debit SEPA XML export > 2 decimals support

= 3.8.1 =
* Improvement: Email attachment plain text pagebuilder support
* Improvement: Allow using {stock_status} in delivery time placeholder
* Improvement: Increase email title gettext replacement filter priority
* Improvement: Allow disabling checkout adjustments via WC_GZD_DISABLE_CHECKOUT_ADJUSTMENTS constant
* Improvement: Quick edit support for delivery times and units
* Improvement: Small business notice placement in cart
* Improvement: Allow tracking Deutsche Post letter products (basic tracking)
* Fix: Make sure cart quantity is not zero when (re-) calculating unit price
* Fix: Shipment packaging dimension conversion

= 3.8.0 =
* Feature: Woo 6.1 Support
* Feature: WP 5.9 Support
* Feature: Explicitly support used goods and defective copies
* Feature: Product warranty PDF upload option and email attachment
* Improvement: Bulk-edit support for delivery time and units
* Improvement: Variation bulk-edit options
* Improvement: Street number validation for separate shipping addresses
* Improvement: Extended Divi support
* Improvement: Dynamically calculate unit price within cart
* Improvement: AJAX refresh unit prices with loading placeholder
* Improvement: Added DOI confirmation status column to users table
* Improvement: urlencode DOI link
* Improvement: WooCommerce Measurement Price Calculator compatibility
* Improvement: Remove terms checkbox from pay for order page in case of WC_GZD_FORCE_PAY_ORDER is defined
* Improvement: Refactored library usage via composer
* Improvement: Prevent deprecated is_ajax usage
* Fix: Minimum age for category-wide usage
* Fix: Register missing pending to cancelled email notification

= 3.7.2 =
* Improvement: Added WP CLI command (wp wc_gzd update) to run DB updates via CLI
* Fix: Do not use empty price_html (e.g. variable product with same prices) as indicator to hide shopmarks

= 3.7.1 =
* Fix: Same as parent delivery time option for variations

= 3.7.0 =
* Feature: Configure delivery times on a per-country base
* Improvement: Support observing multiple price wrappers for unit price auto calculation
* Improvement: Woo Bundles variable products compatibility
* Improvement: Allow non-numerical customer titles
* Improvement: Address data handling for (return) shipments
* Improvement: Added additional VAT exempts for certain postcodes
* Fix: Legal checkbox placeholder replacement
* Fix: Tax rate import

= 3.6.3 =
* Improvement: Do not cache available packaging for non-persisted shipments
* Improvement: Recalculate individually priced bundle unit price
* Improvement: IBAN/BIC formatting
* Fix: Infinite loop bundle price html check
* Fix: Restore global $product variable for bundles

= 3.6.2 =
* Improvement: Checkbox default layout
* Improvement: Added default legal page placeholders to all checkboxes
* Improvement: WooCommerce Bundles shopmarks
* Improvement: WooCommerce Composite Products shopmarks
* Improvement: Added customer cancelled order mail to WPML compatibility
* Improvement: WooCommerce subscriptions recurring tax totals in cart/checkout
* Improvement: By default add a link to tracking id placeholder within shipments
* Improvement: Added customs reference number to shipping address (e.g. for DHL customs)
* Improvement: DHL northern cyprus detection
* Improvement: Allow setting DHL shipper reference via settings
* Improvement: Added WSDL core files to assets dir to improve API performance
* Improvement: OSS BOP compatible CSV export
* Improvement: Allow choosing between order date types for OSS reports
* Fix: OSS date_paid include range
* Fix: Prevent multiple order status change events from firing in case shipment automation updates the status
* Fix: Prevent showing taxes twice within order details in specific setups
* Fix: B2B market net unit prices

= 3.6.1 =
* Improvement: Checkout action check during shopmark execution
* Improvement: Prefer using total over subtotal amount for customs (except vouchers)
* Improvement: Packaging dimension reset handling
* Improvement: Round packaging/item dimensions to prevent packaging errors with fine grained dimensions (e.g. < 1mm)
* Improvement: Tighten DP auth check to prevent auth errors
* Fix: Multiple shipments customs additional total split calculation

= 3.6.0 =
* Feature: Adjust order shopmarks (e.g. thankyou, pay for order)
* Feature: Woo 5.7 support
* Improvement: On new installs: Remove privacy page from general checkbox label and disable privacy registration checkbox
* Improvement: OSS query performance optimization
* Improvement: Post: Allow switching page position on a per-label basis
* Improvement: Warenpost tracking support detection
* Improvement: Favour default packaging in case exists and fits

= 3.5.4 =
* Improvement: New order hook usage while syncing shipments
* Improvement: Update jetpack autoloader version
* Fix: Subscription invoice gateway hook
* Fix: DHL order existence check
* Fix: WPML shipping provider translation filters
* Fix: Additional check before deleting legacy DHL customs meta
* Fix: Infinite loop avoidance in B2B market compatibility script
* Fix: Trusted Shops default jQuery selector reset

= 3.5.3 =
* Improvement: DHL Preferred services renaming
* Improvement: OSS forced shipping tax recalculation during checkout
* Improvement: Store tax display mode for vouchers
* Improvement: PayPal Payments compatibility script
* Improvement: Allow adding new shipments after full returns
* Improvement: Removed explicit port 8443 from IM SOAP URL
* Fix: Shipment address sender phone
* Fix: Return shipment addresses
* Fix: Deutsche Post default service manual label requests

= 3.5.2 =
* Improvement: OSS product tax class WPML
* Improvement: Move customs data aggregation to shipments package
* Improvement: IBAN/BIC JS validation during checkout
* Improvement: Replace order status HTML in case it gets updated during shipment AJAX updates
* Fix: Allow missing product while syncing shipment item data
* Fix: Street number validation for the always option

= 3.5.1 =
* Improvement: Unit price observer now uses MutationObserver
* Improvement: Move product customs options from DHL to shipments package for general usage
* Improvement: Added shipping domestic, EU and international detection to shipments package
* Improvement: Updated OSS plugin to 1. - for a changelog see: https://wordpress.org/plugins/one-stop-shop-woocommerce/#developers
* Fix: Prevent infinite loops while empty price checking for shopmarks within get_product_html filter
* Fix: Prevent duplicate feature plugin loading (e.g. OSS)

= 3.5.0 =
* Feature: OSS compliance helper
* Feature: WP 5.8 support
* Feature: Woo 5.5 support
* Improvement: Unit price auto (re) calculation on single product page
* Improvement: Addify role based pricing compatibility
* Improvement: Mark checkbox as mandatory just like other checkout fields
* Improvement: DHL - Trim strings in case exceeds API limit
* Improvement: DHL - Do not catch weak errors
* Improvement: DP - Allow product selection to be overridden from shipping method
* Fix: Supports customer returns method
* Fix: DP - Add tracking to Einschreiben services

== Upgrade Notice ==

= 1.0.0 =
no upgrade - just install :)