window.germanized=window.germanized||{},function(l,g){g.settings={params:{},init:function(){var e=this;this.params=wc_gzd_admin_settings_params;try{l(document.body).on("wc-enhanced-select-init wc-gzd-enhanced-select-init",this.onEnhancedSelectInit).trigger("wc-gzd-enhanced-select-init")}catch(e){window.console.log(e)}l(document).on("change","input[name=woocommerce_gzd_dispute_resolution_type]",this.onChangeDisputeResolutionType).on("click","a.woocommerce-gzd-input-toggle-trigger",this.onInputToogleClick).on("change",".wc-gzd-setting-tabs input.woocommerce-gzd-tab-status-checkbox",this.onChangeTabStatus).on("change",".wc-gzd-setting-tab-enabled :input",this.preventWarning).on("click","a.wc-gzd-install-extension-btn",this.onInstallExtension).on("change gzd_show_or_hide_fields",".wc-gzd-admin-settings :input",this.onChangeInput),l(".wc-gzd-admin-settings :input").trigger("gzd_show_or_hide_fields"),l("input[name=woocommerce_gzd_dispute_resolution_type]:checked").trigger("change"),this.initMailSortable(),l(document.body).on("init_tooltips",function(){e.initTipTips()}),e.initTipTip()},preventWarning:function(){window.onbeforeunload=""},initTipTip:function(){l(".wc-gzd-setting-tab-actions a.button").tipTip({fadeIn:50,fadeOut:50,delay:200})},onInstallExtension:function(){var e=g.settings,n=l(this),t={action:"woocommerce_gzd_install_extension",security:e.params.install_extension_nonce,extension:n.data("extension")};return n.addClass("wc-gzd-is-loading"),n.append('<span class="spinner is-active"></span>'),l.ajax({url:e.params.ajax_url,data:t,dataType:"json",type:"POST",success:function(e){var t;n.find(".spinner").remove(),n.removeClass("wc-gzd-is-loading"),e.success?n.is("[href]")&&"#"!==n.attr("href")&&(window.location.href=n.attr("href")):e.hasOwnProperty("message")&&(t=l("#wpbody-content").find(".wrap"),(t=0<l(".wc-gzd-setting-tabs").length?l(".wc-gzd-setting-tabs"):t).before('<div class="error inline" id="message"><p>'+e.message+"</p></div>"),l("html, body").animate({scrollTop:l("#message").offset().top-32},1e3))}}),!1},onChangeTabStatus:function(){var e=l(this),t=g.settings,n=e.data("tab"),a=e.parents("td").find(".woocommerce-gzd-input-toggle"),i=a.parents("a"),e=e.is(":checked")?"yes":"no",n={action:"woocommerce_gzd_toggle_tab_enabled",security:t.params.tab_toggle_nonce,enable:e,tab:n};return a.addClass("woocommerce-input-toggle--loading"),l.ajax({url:t.params.ajax_url,data:n,dataType:"json",type:"POST",success:function(e){!0===e.data?(a.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),a.addClass("woocommerce-input-toggle--enabled"),a.removeClass("woocommerce-input-toggle--loading"),e.hasOwnProperty("message")&&0<e.message.length&&(l(".wc-gzd-setting-tabs").before('<div class="error inline" id="message"><p>'+e.message+"</p></div>"),l("html, body").animate({scrollTop:l("#message").offset().top-32},1e3))):!1===e.data?(a.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),a.addClass("woocommerce-input-toggle--disabled"),a.removeClass("woocommerce-input-toggle--loading")):"needs_setup"===e.data&&(window.location.href=i.attr("href"))}}),!1},onChangeInput:function(){var t,n,a,i,o,s,c,r,d=g.settings,e=l(this),e=e.attr("id")?e.attr("id"):e.attr("name"),e=l(".wc-gzd-admin-settings :input[data-show_if_"+l.escapeSelector(e)+"]");l.each(e,function(){for(var e in t=l(this),n=t.parents("tr"),a=t.data(),i=!0,a)if(a.hasOwnProperty(e)&&"show_if_"===e.substring(0,8)&&(r=e.replace("show_if_",""),o=d.getInputByIdOrName(r),s=t.data(e)?t.data(e).split(","):[],0<o.length&&(c=o.val(),r=!1,o.is(":radio")?"no"!==(c=0<o.parents("fieldset").find(":checked").length?o.parents("fieldset").find(":checked").val():"no")&&(r=!0):o.is(":checkbox")?"yes"===(c=o.is(":checked")?"yes":"no")&&(r=!0):r=void 0!==c&&"0"!==c&&""!==c,s&&0<s.length?-1===l.inArray(c,s)&&(i=!1):r||(i=!1)),!i))break;n.removeClass("wc-gzd-setting-visible wc-gzd-setting-invisible"),i?n.addClass("wc-gzd-setting-visible"):n.addClass("wc-gzd-setting-invisible")})},getInputByIdOrName:function(t){var n=g.settings;return t=n.getCleanInputId(t),l(".wc-gzd-admin-settings :input").filter(function(){var e=l(this).attr("id")?l(this).attr("id"):l(this).attr("name");return!!e&&n.getCleanInputId(e)===t})},getCleanInputId:function(e){return e.toLowerCase().replace(/-/g,"")},onEnhancedSelectInit:function(){var n=g.settings;l(":input.wc-gzd-enhanced-tags").filter(":not(.enhanced)").each(function(){var e={minimumResultsForSearch:10,allowClear:!!l(this).data("allow_clear"),placeholder:l(this).data("placeholder"),tags:!0};l(this).selectWoo(e).addClass("enhanced")}),l(":input.gzd-select-term").filter(":not(.enhanced)").each(function(){var t,e={allowClear:!!l(this).data("allow_clear"),placeholder:l(this).data("placeholder"),minimumInputLength:l(this).data("minimum_input_length")?l(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:n.params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:l(this).data("action")||"woocommerce_json_search_taxonomy_terms",security:n.params.search_term_nonce,exclude:l(this).data("exclude"),taxonomy:l(this).data("taxonomy"),limit:l(this).data("limit")}},processResults:function(e){var n=[];return e&&!e.error&&l.each(e,function(e,t){n.push({id:t.term_id,text:t.name})}),{results:n}},cache:!0}};e=e,l(t=this).selectWoo(e).addClass("enhanced"),l(t).prop("multiple")&&l(t).on("change",function(){var e=l(t).children();e.sort(function(e,t){e=e.text.toLowerCase(),t=t.text.toLowerCase();return t<e?1:e<t?-1:0}),l(t).html(e)})})},onParcelDeliveryShowSpecial:function(){"shipping_methods"===l(this).val()?l("select#woocommerce_gzd_checkboxes_parcel_delivery_show_shipping_methods").parents("tr").show():l("select#woocommerce_gzd_checkboxes_parcel_delivery_show_shipping_methods").parents("tr").hide()},onChangeDisputeResolutionType:function(){var e=l(this).val();l("#woocommerce_gzd_alternative_complaints_text_"+e);l("[id^=woocommerce_gzd_alternative_complaints_text_]").parents("tr").hide(),l("#woocommerce_gzd_alternative_complaints_text_"+e).parents("tr").show()},onInputToogleClick:function(){var e=l(this).find("span.woocommerce-gzd-input-toggle"),t=e.parents("fieldset").find("input[type=checkbox]"),n=e.hasClass("woocommerce-input-toggle--enabled");return e.removeClass("woocommerce-input-toggle--enabled"),e.removeClass("woocommerce-input-toggle--disabled"),n?(t.prop("checked",!1),e.addClass("woocommerce-input-toggle--disabled")):(t.prop("checked",!0),e.addClass("woocommerce-input-toggle--enabled")),t.trigger("change"),!1},initMailSortable:function(){var a;0<l("#woocommerce_gzd_mail_attach_imprint").length&&(a=l("#woocommerce_gzd_mail_attach_imprint").parents("table"),l(a).find("tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td, th",scrollSensitivity:40,helper:function(e,t){return t.children().each(function(){jQuery(this).width(jQuery(this).width())}),t.css("left","0"),t},start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style");var n=[];l(a).find("tr select").each(function(){n.push(l(this).attr("id").replace("woocommerce_gzd_mail_attach_",""))}),l("#woocommerce_gzd_mail_attach_order").val(n.join())}}))}},l(document).ready(function(){g.settings.init()})}(jQuery,window.germanized);