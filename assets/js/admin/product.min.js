jQuery(function(o){var c={warranty_upload_file_frame:!1,init:function(){var e=c;o(document).on("click","a.wc-gzd-add-new-country-specific-delivery-time",e.onAddNewDeliveryTime).on("click","a.wc-gzd-remove-country-specific-delivery-time",e.onRemoveDeliveryTime).on("click",".upload_warranty_button",e.onUploadWarranty).on("click","a.wc-gzd-warranty-delete",e.onRemoveWarranty).on("woocommerce-product-type-change wc-gzd-product-type-change",e.onProductTypeChange).on("wc-gzd-refresh-unit-placeholder",e.onRefreshProductUnitPlaceholder).on("change",":input#_unit",e.onChangeUnit).on("wc-gzd-show-hide-panels",e.showHidePanels);try{o(document.body).on("wc-enhanced-select-init wc-gzd-enhanced-select-init",this.onEnhancedSelectInit).trigger("wc-gzd-enhanced-select-init")}catch(e){window.console.log(e)}o("input#_is_food, input#_defective_copy").on("change",function(){e.showHidePanels()}),o("input#_defective_copy").trigger("change"),o("#the-list").on("click",".editinline",e.onQuickEdit)},onRefreshProductUnitPlaceholder:function(){var e=o(":input#_unit").find(":selected");0<e.length?o(".wc-gzd-unit-placeholder").text(e.text()):o(".wc-gzd-unit-placeholder").text("")},onChangeUnit:function(){o(document.body).trigger("wc-gzd-refresh-unit-placeholder")},onEnhancedSelectInit:function(){var t=c;o(":input.wc-gzd-enhanced-nutri-score").filter(":not(.enhanced)").each(function(){var e={minimumResultsForSearch:10,allowClear:!!o(this).data("allow_clear"),placeholder:o(this).data("placeholder"),templateResult:t.formatNutriScore};o(this).selectWoo(e).addClass("enhanced")})},formatNutriScore:function(e){return e.id?o('<span><i class="nutri-score-select-value nutri-score-select-value-'+e.element.value+'">&#9679;</i> '+e.text+"</span>"):e.text},onProductTypeChange:function(){c.showHidePanels()},showHidePanels:function(){var e=o("input#_is_food:checked").length,t=o("input#_defective_copy:checked").length;o(".hide_if_is_food, .hide_if_defective_copy").show(),o(".show_if_is_food, .show_if_defective_copy").hide(),e?o(".show_if_is_food").show():o(".food_options.food_tab").hasClass("active")&&o(".general_options.general_tab > a").trigger("click"),t?(o(".show_if_defective_copy").show(),o("#wc-gzd-product-defect-description").show()):o("#wc-gzd-product-defect-description").hide()},onQuickEdit:function(){var e,t,n=(n=o(this).closest("tr").attr("id")).replace("post-",""),i=o("#inline_"+n);0<i.find(".gzd_delivery_time_slug").length&&(e=i.find(".gzd_delivery_time_slug").text(),t=i.find(".gzd_delivery_time_name").text(),i=i.find(".gzd_unit_slug").text(),o('select[name="_unit"] option:selected',".inline-edit-row").attr("selected",!1).trigger("change"),o('select[name="_unit"] option[value="'+i+'"]').attr("selected","selected").trigger("change"),o('select[name="_delivery_time"] option').remove().trigger("change"),e&&o('select[name="_delivery_time"]').append('<option value="'+e+'" selected="selected">'+t+"</option>"),setTimeout(function(){var e=o("tr#edit-"+n+" .wc-gzd-delivery-time-search.enhanced");0<e.length&&(e.selectWoo("destroy"),e.removeClass("enhanced")),o("tr#edit-"+n+" .wc-gzd-delivery-time-select-placeholder").addClass("wc-product-search","wc-gzd-delivery-time-search").removeClass("wc-gzd-delivery-time-select-placeholder"),o(document.body).trigger("wc-enhanced-select-init")},100))},onUploadWarranty:function(e){var n=c,t=o(this),i=t.closest("p.form-field, p.form-row").find("a.wc-gzd-warranty-delete"),a=t.closest("p.form-field, p.form-row").find(".wc-gzd-warranty-attachment");e.preventDefault(),n.warranty_upload_file_frame=wp.media.frames.customHeader=wp.media({title:t.data("choose"),library:{type:"application/pdf"},button:{text:t.data("update")},multiple:!1}),n.warranty_upload_file_frame.on("select",function(){n.warranty_upload_file_frame.state().get("selection").map(function(e){(e=e.toJSON()).filename&&(t.text(e.filename),i.removeClass("file-missing").show(),a.val(e.id))})}),n.warranty_upload_file_frame.on("open",function(){var e=n.warranty_upload_file_frame.state().get("selection"),t=a.val();0<t.length?(t=wp.media.attachment(t),e.add(t?[t]:[]),n.warranty_upload_file_frame.content.mode("browse")):(e.remove(),n.warranty_upload_file_frame.content.mode("upload"))}),n.warranty_upload_file_frame.open()},onRemoveWarranty:function(){var e=o(this).closest("p.form-field, p.form-row");return e.find(".wc-gzd-warranty-attachment").val(""),e.find("a.upload_warranty_button").text(e.find("a.upload_warranty_button").data("default-label")),e.find("a.wc-gzd-warranty-delete").addClass("file-missing").hide(),!1},onAddNewDeliveryTime:function(){var e=o(this).parents("#shipping_product_data"),t=(e=0===e.length?o(this).parents(".woocommerce_variable_attributes"):e).find(".wc-gzd-add-country-specific-delivery-time-template .wc-gzd-delivery-time-search.enhanced");0<t.length&&(t.selectWoo("destroy"),t.removeClass("enhanced"));t=e.find(".wc-gzd-add-country-specific-delivery-time-template:first").clone();return t.removeClass("wc-gzd-add-country-specific-delivery-time-template").addClass("wc-gzd-country-specific-delivery-time-new"),e.find(".wc-gzd-new-country-specific-delivery-time-placeholder").append(t).show(),o(document.body).trigger("wc-enhanced-select-init"),!1},onRemoveDeliveryTime:function(){var e=o(this).parents(".form-row, .form-field");return e.find("select").trigger("change"),e.remove(),!1}};c.init()});