(self.webpackWcBlocksJsonp=self.webpackWcBlocksJsonp||[]).push([[131],{225:function(e,t,c){"use strict";c.r(t),c.d(t,{default:function(){return f}});var n=c(196),o=c(307),a=c(554),r=c(819),s=c.n(r),d=function(e){let{icon:t,size:c=24,...n}=e;return(0,o.cloneElement)(t,{width:c,height:c,...n})},l=c(444),i=(0,o.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(l.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),h=({show:e,url:t,onClose:c,content:a})=>{const[r,s]=(0,o.useState)(!0),[l,h]=(0,o.useState)("");let u="";if(a)h(a),s(!1);else if(t)try{const e=new URL(t);u=t.toString().substring(e.origin.length)}catch{}return(0,o.useEffect)((()=>{e?document.body.classList.add("checkout-modal-open"):document.body.classList.remove("checkout-modal-open"),u&&(s(!0),h(""),fetch(u,{method:"get"}).then((e=>e.text())).then((e=>{h(e),s(!1)})).catch((function(e){s(!1)})))}),[u,h,e]),e?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"wc-gzd-checkout-modal-bg"}),(0,n.createElement)("div",{className:"wc-gzd-checkout-modal-wrapper"},(0,n.createElement)("div",{className:"wc-gzd-checkout-modal"},(0,n.createElement)("div",{className:"actions"},(0,n.createElement)("a",{className:"wc-gzd-checkout-modal-close",onClick:e=>{document.body.classList.remove("checkout-modal-open"),c(e)}},(0,n.createElement)(d,{className:"wc-gzd-checkout-modal-close-icon",icon:i,size:24}))),r?(0,n.createElement)("div",{className:"content is-loading"},(0,n.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"})):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"content",dangerouslySetInnerHTML:{__html:l}}))))):null},u=c(184),m=c.n(u),k=c(818),b=c(801),g=({checkbox:e,setShowModal:t,setModalUrl:c,onChangeCheckbox:r})=>{const s="checkbox-"+e.id,{setValidationErrors:d,clearValidationError:l}=(0,k.useDispatch)(b.VALIDATION_STORE_KEY),i=!!e.hidden&&e.hidden,h=(0,k.useSelect)((e=>e(b.VALIDATION_STORE_KEY).getValidationError(s))),u=!(!h?.message||h?.hidden);(0,o.useEffect)((()=>{if(e.has_checkbox)return!0===e.checked||!0===e.hidden?l(s):e.is_required&&d({[s]:{message:e.error_message,hidden:!0}}),()=>{l(s)}}),[e.is_required,e.checked,e.hidden,s,l,d]);const g={id:`checkbox-${e.html_id}`,className:"wc-gzd-checkbox",name:`${e.name}`,checked:!!e.checked,hasError:e.is_required&&u,required:e.is_required};return i?null:(0,n.createElement)("div",{className:m()(`wc-gzd-block-checkout-checkboxes__${e.id}`,Object.values(e.wrapper_classes).join(" ")),key:`wrapper-${e.id}`},e.has_checkbox?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(a.CheckboxControl,{key:`checkbox-${e.id}`,...g,onChange:t=>{r({...e,checked:t})}},(0,n.createElement)("span",{onClick:e=>{const n=e.target.closest("a");if(n&&e.currentTarget.contains(n)&&n.classList.contains("wc-gzd-modal")){e.stopPropagation(),e.preventDefault();let o=n.getAttribute("href");o&&(c(o),t(!0))}},dangerouslySetInnerHTML:{__html:e.label}}))):(0,n.createElement)("div",{className:"wc-gzd-checkbox has-no-checkbox"},(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e.label}})))},p=c(617),_=e=>{const{onChangeCheckbox:t,checkbox:c}=e,{shouldCreateAccount:a,customerId:r}=(0,k.useSelect)((e=>{const t=e(b.CHECKOUT_STORE_KEY);return{customerId:t.getCustomerId(),shouldCreateAccount:t.getShouldCreateAccount()}})),s=!1===(0,p.getSetting)("checkoutAllowsGuest",!1)&&!r;return(0,o.useEffect)((()=>{t(a||s?{...c,hidden:!1}:{...c,hidden:!0})}),[a]),(0,n.createElement)(g,{...e})},E=e=>{const[t,c]=(0,o.useState)({}),{onChangeCheckbox:a,checkbox:r}=e,{billingAddress:s,paymentData:d,currentPaymentMethod:l}=(0,k.useSelect)((e=>{const t=e(b.CART_STORE_KEY),c=e(b.PAYMENT_STORE_KEY);return{billingAddress:t.getCartData().billingAddress,paymentData:c.getPaymentMethodData(),currentPaymentMethod:c.getActivePaymentMethod()}}));return(0,o.useEffect)((()=>{const e={country:s.country,postcode:s.postcode,city:s.city,street:s.address_1,address_2:s.address_2,account_holder:d.hasOwnProperty("direct_debit_account_holder")?d.direct_debit_account_holder:"",account_iban:d.hasOwnProperty("direct_debit_account_iban")?d.direct_debit_account_iban:"",account_swift:d.hasOwnProperty("direct_debit_account_bic")?d.direct_debit_account_bic:""};c(e),a("direct-debit"===l&&e.account_holder&&e.account_iban&&e.account_swift?{...r,hidden:!1}:{...r,hidden:!0})}),[s,d,l]),(0,n.createElement)(g,{...e,setModalUrl:c=>{c+="&"+new URLSearchParams(t).toString(),e.setModalUrl(c)}})},f=({children:e,checkoutExtensionData:t,extensions:c,cart:r})=>{const[d,l]=(0,o.useState)(!1),{setExtensionData:i}=t,u=c.hasOwnProperty("woocommerce-germanized")?c["woocommerce-germanized"]:{},m=u.hasOwnProperty("checkboxes")?u.checkboxes:[],k=m.reduce(((e,t)=>({...e,[t.id]:{...t,hidden:t.default_hidden,checked:t.default_checked}})),{}),[b,p]=(0,o.useState)(k),[f,w]=(0,o.useState)(""),x=(0,o.useRef)(!1),y=e=>Object.values(e).filter((e=>e.checked||!e.has_checkbox&&!e.hidden?e:null));(0,o.useEffect)((()=>{i("woocommerce-germanized","checkboxes",y(b))}),[b]);const C=(0,o.useCallback)((e=>{p((t=>{const c=t&&t.hasOwnProperty(e.id)&&t[e.id].checked!==e.checked,n={...t,[e.id]:{...e}};return c&&(0,a.extensionCartUpdate)({namespace:"woocommerce-germanized-checkboxes",data:{checkboxes:y(n)}}),n}))}),[i,b,p,a.extensionCartUpdate]);return(0,o.useEffect)((()=>{if(x.current){let e={};Object.keys(k).map((t=>{const c=b.hasOwnProperty(t)?{checked:b[t].checked,hidden:b[t].hidden}:{};e[t]={...k[t],...c}})),s().isEqual(e,b)||p(e)}x.current=!0}),[m]),(0,n.createElement)("div",{className:"wc-gzd-checkboxes"},(0,n.createElement)(h,{show:d,url:f,onClose:()=>{l(!1)}}),Object.keys(b).map((e=>{const t={...b[e]};return"sepa"===t.id?(0,n.createElement)(E,{checkbox:t,setShowModal:l,setModalUrl:w,key:t.id,onChangeCheckbox:C}):"privacy"===t.id?(0,n.createElement)(_,{checkbox:t,setShowModal:l,setModalUrl:w,key:t.id,onChangeCheckbox:C}):(0,n.createElement)(g,{checkbox:t,setShowModal:l,setModalUrl:w,key:t.id,onChangeCheckbox:C})})))}},184:function(e,t){var c;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var c=arguments[t];if(c){var a=typeof c;if("string"===a||"number"===a)e.push(c);else if(Array.isArray(c)){if(c.length){var r=o.apply(null,c);r&&e.push(r)}}else if("object"===a)if(c.toString===Object.prototype.toString)for(var s in c)n.call(c,s)&&c[s]&&e.push(s);else e.push(c.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(c=function(){return o}.apply(t,[]))||(e.exports=c)}()}}]);