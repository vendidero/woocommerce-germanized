(self.webpackWcBlocksJsonp=self.webpackWcBlocksJsonp||[]).push([[131],{225:function(e,t,c){"use strict";c.r(t),c.d(t,{default:function(){return f}});var n=c(196),a=c(307),o=c(554),r=c(819),s=c.n(r),d=c(184),l=c.n(d),i=function(e){let{icon:t,size:c=24,...n}=e;return(0,a.cloneElement)(t,{width:c,height:c,...n})},h=c(444),u=(0,a.createElement)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(h.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),m=({show:e,url:t,onClose:c,content:o})=>{const[r,s]=(0,a.useState)(!0),[d,l]=(0,a.useState)("");let h="";if(o)l(o),s(!1);else if(t)try{const e=new URL(t);h=t.toString().substring(e.origin.length)}catch{}return(0,a.useEffect)((()=>{e?document.body.classList.add("checkout-modal-open"):document.body.classList.remove("checkout-modal-open"),h&&(s(!0),l(""),fetch(h,{method:"get"}).then((e=>e.text())).then((e=>{l(e),s(!1)})).catch((function(e){s(!1)})))}),[h,l,e]),e?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"wc-gzd-checkout-modal-bg"}),(0,n.createElement)("div",{className:"wc-gzd-checkout-modal-wrapper"},(0,n.createElement)("div",{className:"wc-gzd-checkout-modal"},(0,n.createElement)("div",{className:"actions"},(0,n.createElement)("a",{className:"wc-gzd-checkout-modal-close",onClick:e=>{document.body.classList.remove("checkout-modal-open"),c(e)}},(0,n.createElement)(i,{className:"wc-gzd-checkout-modal-close-icon",icon:u,size:24}))),r?(0,n.createElement)("div",{className:"content is-loading"},(0,n.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"})):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"content",dangerouslySetInnerHTML:{__html:d}}))))):null},k=c(818),b=c(801),g=({checkbox:e,setShowModal:t,setModalUrl:c,onChangeCheckbox:r})=>{const s="checkbox-"+e.id,{setValidationErrors:d,clearValidationError:i}=(0,k.useDispatch)(b.VALIDATION_STORE_KEY),h=!!e.hidden&&e.hidden,u=(0,k.useSelect)((e=>e(b.VALIDATION_STORE_KEY).getValidationError(s))),m=!(!u?.message||u?.hidden);(0,a.useEffect)((()=>{if(e.has_checkbox)return!0===e.checked||!0===e.hidden?i(s):e.is_required&&d({[s]:{message:e.error_message,hidden:!0}}),()=>{i(s)}}),[e.is_required,e.checked,e.hidden,s,i,d]);const g={id:`checkbox-${e.html_id}`,className:"wc-gzd-checkbox",name:`${e.name}`,checked:!!e.checked,hasError:e.is_required&&m,required:e.is_required};return h?null:(0,n.createElement)("div",{className:l()(`wc-gzd-block-checkout-checkboxes__${e.id}`,Object.values(e.wrapper_classes).join(" ")),key:`wrapper-${e.id}`},e.has_checkbox?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.CheckboxControl,{key:`checkbox-${e.id}`,...g,onChange:t=>{r({...e,checked:t})}},(0,n.createElement)("span",{onClick:e=>{const n=e.target.closest("a");if(n&&e.currentTarget.contains(n)&&n.classList.contains("wc-gzd-modal")){e.stopPropagation(),e.preventDefault();let a=n.getAttribute("href");a&&(c(a),t(!0))}},dangerouslySetInnerHTML:{__html:e.label}}))):(0,n.createElement)("div",{className:"wc-gzd-checkbox has-no-checkbox"},(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e.label}})))},p=c(617),_=e=>{const{onChangeCheckbox:t,checkbox:c}=e,{shouldCreateAccount:o,customerId:r}=(0,k.useSelect)((e=>{const t=e(b.CHECKOUT_STORE_KEY);return{customerId:t.getCustomerId(),shouldCreateAccount:t.getShouldCreateAccount()}})),s=!1===(0,p.getSetting)("checkoutAllowsGuest",!1)&&!r;return(0,a.useEffect)((()=>{t(o||s?{...c,hidden:!1}:{...c,hidden:!0})}),[o]),(0,n.createElement)(g,{...e})},E=e=>{const[t,c]=(0,a.useState)({}),{onChangeCheckbox:o,checkbox:r}=e,{billingAddress:s,paymentData:d,currentPaymentMethod:l}=(0,k.useSelect)((e=>{const t=e(b.CART_STORE_KEY),c=e(b.PAYMENT_STORE_KEY);return{billingAddress:t.getCartData().billingAddress,paymentData:c.getPaymentMethodData(),currentPaymentMethod:c.getActivePaymentMethod()}}));return(0,a.useEffect)((()=>{const e={country:s.country,postcode:s.postcode,city:s.city,street:s.address_1,address_2:s.address_2,account_holder:d.hasOwnProperty("direct_debit_account_holder")?d.direct_debit_account_holder:"",account_iban:d.hasOwnProperty("direct_debit_account_iban")?d.direct_debit_account_iban:"",account_swift:d.hasOwnProperty("direct_debit_account_bic")?d.direct_debit_account_bic:""};c(e),o("direct-debit"===l&&e.account_holder&&e.account_iban&&e.account_swift?{...r,hidden:!1}:{...r,hidden:!0})}),[s,d,l]),(0,n.createElement)(g,{...e,setModalUrl:c=>{c+="&"+new URLSearchParams(t).toString(),e.setModalUrl(c)}})},f=({children:e,checkoutExtensionData:t,extensions:c,cart:r,className:d})=>{const[i,h]=(0,a.useState)(!1),{setExtensionData:u}=t,k=c.hasOwnProperty("woocommerce-germanized")?c["woocommerce-germanized"]:{},b=k.hasOwnProperty("checkboxes")?k.checkboxes:[],p=b.reduce(((e,t)=>({...e,[t.id]:{...t,hidden:t.default_hidden,checked:t.default_checked}})),{}),[f,w]=(0,a.useState)(p),[x,y]=(0,a.useState)(""),C=(0,a.useRef)(!1),S=e=>Object.values(e).filter((e=>e.checked||!e.has_checkbox&&!e.hidden?e:null));(0,a.useEffect)((()=>{u("woocommerce-germanized","checkboxes",S(f))}),[f]);const v=(0,a.useCallback)((e=>{w((t=>{const c=t&&t.hasOwnProperty(e.id)&&t[e.id].checked!==e.checked,n={...t,[e.id]:{...e}};return c&&(0,o.extensionCartUpdate)({namespace:"woocommerce-germanized-checkboxes",data:{checkboxes:S(n)}}),n}))}),[u,f,w,o.extensionCartUpdate]);return(0,a.useEffect)((()=>{if(C.current){let e={};Object.keys(p).map((t=>{const c=f.hasOwnProperty(t)?{checked:f[t].checked,hidden:f[t].hidden}:{};e[t]={...p[t],...c}})),s().isEqual(e,f)||w(e)}C.current=!0}),[b]),(0,n.createElement)("div",{className:l()("wc-gzd-checkboxes",d)},(0,n.createElement)(m,{show:i,url:x,onClose:()=>{h(!1)}}),Object.keys(f).map((e=>{const t={...f[e]};return"sepa"===t.id?(0,n.createElement)(E,{checkbox:t,setShowModal:h,setModalUrl:y,key:t.id,onChangeCheckbox:v}):"privacy"===t.id?(0,n.createElement)(_,{checkbox:t,setShowModal:h,setModalUrl:y,key:t.id,onChangeCheckbox:v}):(0,n.createElement)(g,{checkbox:t,setShowModal:h,setModalUrl:y,key:t.id,onChangeCheckbox:v})})))}},184:function(e,t){var c;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var c=arguments[t];if(c){var o=typeof c;if("string"===o||"number"===o)e.push(c);else if(Array.isArray(c)){if(c.length){var r=a.apply(null,c);r&&e.push(r)}}else if("object"===o)if(c.toString===Object.prototype.toString)for(var s in c)n.call(c,s)&&c[s]&&e.push(s);else e.push(c.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(c=function(){return a}.apply(t,[]))||(e.exports=c)}()}}]);